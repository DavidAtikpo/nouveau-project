"use strict";(self["webpackChunknouveau_projet"]=self["webpackChunknouveau_projet"]||[]).push([[63],{2903:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ca}});var s=a(6768);function i(e,t,a,i,o,r){const l=(0,s.g2)("UserDashNavbarComponent"),n=(0,s.g2)("userDashLayout");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,null,{topbar:(0,s.k6)((()=>[(0,s.bF)(l)])),dashboard:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(o.CurrentView)))])),_:1})])}var o=a(1319),r=a(4232),l=a(5130),n=a(8889);const c=e=>((0,s.Qi)("data-v-45524ec6"),e=e(),(0,s.jt)(),e),u={class:"navigation"},d={class:"search"},h={key:0,class:"dropdown"},v=["onClick"],p={key:1,class:"dropdown"},k={class:"icons"},g=c((()=>(0,s.Lk)("img",{src:n,alt:"Notification",class:"notification-icon"},null,-1))),f={key:0,class:"dropdown"},m={key:0},L=["src"],b={key:1,class:"dropdown"},y=c((()=>(0,s.Lk)("div",{class:"hamburger"},null,-1))),C=[y],_={class:"content"},w={class:"side-buttons"},T={class:"nav"},D={class:"nav"},A={class:"nav"},j={class:"nav"},F={class:"nav"},x={class:"nav"},P={class:"nav"};function E(e,t,a,i,o,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("nav",u,[(0,s.Lk)("button",{class:"menu-btn",onClick:t[0]||(t[0]=(...e)=>n.toggleMenu&&n.toggleMenu(...e))},"More"),(0,s.Lk)("ul",{class:(0,r.C4)({"show-menu":o.isMenuOpen})},[(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/analytics",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("dashboard")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/suivi",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("goal")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/rapport",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("report")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/ActiviteHebdomadaire",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("weeklyGoal")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/inscription",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("registration")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/weekGoal",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("week")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/listOfchildren",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("present")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/Absent",class:"nav-link","active-class":"active"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("absent")),1)])),_:1})])],2),(0,s.Lk)("div",d,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.searchQuery=e),onInput:t[2]||(t[2]=(...e)=>n.search&&n.search(...e)),placeholder:"Search..."},null,544),[[l.Jo,o.searchQuery]]),o.searchResults.length>0?((0,s.uX)(),(0,s.CE)("ul",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.searchResults,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,onClick:t=>n.displayResult(e)},(0,r.v_)(e),9,v)))),128))])):(0,s.Q3)("",!0),o.searchQuery.length>0&&0===o.searchResults.length?((0,s.uX)(),(0,s.CE)("p",p,"No results found.")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",k,[(0,s.Lk)("div",{class:"notification-wrapper",onClick:t[3]||(t[3]=(...e)=>n.toggleNotificationDropdown&&n.toggleNotificationDropdown(...e))},[g,(0,s.Lk)("span",{class:(0,r.C4)({"notification-count":!0,"few-notifications":e.notifications.length<=2})},(0,r.v_)(e.notifications.length),3)]),o.isNotificationDropdownOpen?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.Lk)("ul",null,[0===e.notifications.length?((0,s.uX)(),(0,s.CE)("li",m,"No notifications")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.notifications,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,r.v_)(e.user)+","+(0,r.v_)(e.entry),1)))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("img",{src:o.profilePhotoURL,onClick:t[4]||(t[4]=(...e)=>n.toggleProfileDropdown&&n.toggleProfileDropdown(...e)),alt:"Profile Icon",class:"profile-icon"},null,8,L),o.isProfileDropdownOpen?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/userInfo"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("editPhoto")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/gererCount"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("manageAccount")),1)])),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/user/Parametre"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(n.getTranslatedTitle("setting")),1)])),_:1})])]),(0,s.Lk)("div",{onClick:t[5]||(t[5]=(...e)=>n.confirmLogout&&n.confirmLogout(...e))},(0,r.v_)(n.getTranslatedTitle("logout")),1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"menu-toggle",onClick:t[6]||(t[6]=(...e)=>n.toggleMenu&&n.toggleMenu(...e))},C),(0,s.Lk)("div",{class:(0,r.C4)(["side-bar",{"hide-menu":e.isMobile&&!e.menuVisible}])},[(0,s.Lk)("div",_,[(0,s.Lk)("div",w,[(0,s.bF)(c,{to:"/user/userActivity","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",T,(0,r.v_)(n.getTranslatedTitle("board")),1)])),_:1}),(0,s.bF)(c,{to:"/user/Review","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",D,(0,r.v_)(n.getTranslatedTitle("users")),1)])),_:1}),(0,s.bF)(c,{to:"/user/dailyObject","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",A,(0,r.v_)(n.getTranslatedTitle("activities")),1)])),_:1}),(0,s.bF)(c,{to:"/user/report","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",j,(0,r.v_)(n.getTranslatedTitle("report")),1)])),_:1}),(0,s.bF)(c,{to:"/user/statistic","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",F,(0,r.v_)(n.getTranslatedTitle("statistics")),1)])),_:1}),(0,s.bF)(c,{to:"/user/message","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",x,(0,r.v_)(n.getTranslatedTitle("messages")),1)])),_:1}),(0,s.bF)(c,{to:"/user/setting","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",P,(0,r.v_)(n.getTranslatedTitle("settings")),1)])),_:1})])])],2)])],64)}a(4114);var M=a(6666),G=a(4249),O=a(4373),$=a(2169),I={mixins:[M.y],data(){return{isMenuOpen:!1,searchQuery:"",searchResults:[],isNotificationDropdownOpen:!1,isProfileDropdownOpen:!1,profilePhotoURL:""}},computed:{...(0,G.aH)(["theme","language"]),translatedTitles(){return{en:{dashboard:"Dashboard",goal:"Goal",report:"Report",weeklyGoal:"Weekly Goal",registration:"Registration",week:"Week",present:"Present",absent:"Absent",board:"Board",users:"Users",activities:"Activities",statistics:"Statistics",messages:"Messages",settings:"Settings",editPhoto:"Edit Photo",manageAccount:"Manage Account",setting:"Settings",logout:"Logout"},fr:{dashboard:"Accueil",goal:"Objectif",report:"Rapport",weeklyGoal:"Objectifs Heb",registration:"Inscription",week:"Semaine",present:"Presents",absent:"Absents",board:"Tableau",users:"Utilisateurs",activities:"Activites",statistics:"Statistique",messages:"Message",settings:"Paramètre",editPhoto:"Modifier Photo",manageAccount:"Gestion de compte",setting:"Parametre",logout:"Deconnexion"}}}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},toggleNotificationDropdown(){this.isNotificationDropdownOpen=!this.isNotificationDropdownOpen},toggleProfileDropdown(){this.isProfileDropdownOpen=!this.isProfileDropdownOpen},fetchProfilePicture(){const e=localStorage.getItem("token"),t={"Content-Type":"application/json",Authorization:`Bearer ${e}`};O.A.get(`${$.J}/admin/getprofil`,{headers:t}).then((e=>{this.profilePhotoURL=e.data.profilePhotoUrl,console.log("profilePicture",this.profilePhotoURL)})).catch((e=>{console.error("Error fetching profile picture:",e)}))},search(){this.searchResults=[],0!==this.searchQuery.length&&O.A.get(`${$.J}/search?q=`+this.searchQuery).then((e=>{this.searchResults=e.data})).catch((e=>{console.error("Error fetching search results:",e)}))},displayResult(e){console.log("Selected result info:",e)},async logout(){try{await O.A.post(`${$.J}/user/logout`,{},{withCredentials:!0}),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),this.$router.push("/login")}catch(e){console.error("Error during logout:",e)}},confirmLogout(){confirm("Are you sure you want to log out?")&&this.logout()},handleClickOutside(e){const t=this.$refs.notificationWrapper,a=this.$refs.profileIcon,s=t&&!t.contains(e.target),i=a&&!a.contains(e.target);s&&this.isNotificationDropdownOpen&&(this.isNotificationDropdownOpen=!1),i&&this.isProfileDropdownOpen&&(this.isProfileDropdownOpen=!1)},getTranslatedTitle(e){return this.translatedTitles[this.language][e]},shouldReceiveNotification(e){return"Coordinateur"==e.role}},mounted(){this.fetchProfilePicture(),document.addEventListener("click",this.handleClickOutside)},beforeMount(){document.removeEventListener("click",this.handleClickOutside)}},R=a(1241);const S=(0,R.A)(I,[["render",E],["__scopeId","data-v-45524ec6"]]);var X=S,W=a(7599);const Q=e=>((0,s.Qi)("data-v-d6b19a2a"),e=e(),(0,s.jt)(),e),U={class:"side-bar"},N=Q((()=>(0,s.Lk)("div",{class:"hamburger"},null,-1))),B=[N],z=Q((()=>(0,s.Lk)("div",{class:"logo"},[(0,s.Lk)("img",{class:"logo-rr",src:W,alt:"CDE koinonia"})],-1))),J={class:"side-buttons"},V=Q((()=>(0,s.Lk)("div",{class:"nav"}," Dashboard ",-1))),q=Q((()=>(0,s.Lk)("div",{class:"nav"}," Review ",-1))),K=Q((()=>(0,s.Lk)("div",{class:"nav"}," feedback ",-1))),H=Q((()=>(0,s.Lk)("div",{class:"nav"}," Message ",-1))),Z=Q((()=>(0,s.Lk)("div",{class:"nav"}," Statistique ",-1))),Y=Q((()=>(0,s.Lk)("div",{class:"nav"}," Paramettre ",-1)));function ee(e,t,a,i,o,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",U,[(0,s.Lk)("div",{class:"menu-toggle",onClick:t[0]||(t[0]=(...e)=>l.toggleMenu&&l.toggleMenu(...e))},B),(0,s.Lk)("div",{class:(0,r.C4)(["content",{"hide-menu":o.isMobile}])},[z,(0,s.Lk)("div",J,[(0,s.bF)(n,{to:"/user/analytics","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[V])),_:1}),(0,s.bF)(n,{to:"/user/review","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[q])),_:1}),(0,s.bF)(n,{to:"/user/feedback","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[K])),_:1}),(0,s.bF)(n,{to:"/user/Message","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[H])),_:1}),(0,s.bF)(n,{to:"/user/statistic","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[Z])),_:1}),(0,s.bF)(n,{to:"/user/setting","active-class":"active","exact-active-class":"exact-active",class:"default-link"},{default:(0,s.k6)((()=>[Y])),_:1})])],2)])}var te={data(){return{isMobile:!1}},mounted(){this.isMobile=window.innerWidth<768,window.addEventListener("resize",this.handleResize)},beforeMount(){window.addEventListener("resize",this.handleResize)},methods:{handleResize(){this.isMobile=window.innerWidth<768},toggleMenu(){this.isMobile=!this.isMobile}}};const ae=(0,R.A)(te,[["render",ee],["__scopeId","data-v-d6b19a2a"]]);var se=ae,ie=a(3231);const oe=e=>((0,s.Qi)("data-v-6ae088f2"),e=e(),(0,s.jt)(),e),re={class:"page"},le={class:"container"},ne={class:"content"},ce=oe((()=>(0,s.Lk)("h2",null,"Remplir l'objectif de la journée",-1))),ue=oe((()=>(0,s.Lk)("hr",null,null,-1))),de={class:"goal"},he={class:"input-group"},ve=oe((()=>(0,s.Lk)("label",{for:"arrivalTime"},"Temps d'arrivée au service:",-1))),pe=oe((()=>(0,s.Lk)("br",null,null,-1))),ke={class:"input-group"},ge=oe((()=>(0,s.Lk)("label",{for:"date"},"Date:",-1))),fe=oe((()=>(0,s.Lk)("br",null,null,-1))),me={class:"input-group"},Le=oe((()=>(0,s.Lk)("label",{for:"dailyGoal"},"Objectif de la journée:",-1))),be=oe((()=>(0,s.Lk)("br",null,null,-1))),ye={key:0,class:"error-message"},Ce={key:0},_e={key:0,class:"popup"},we=oe((()=>(0,s.Lk)("h2",null,"Formulaire soumis avec succès !",-1))),Te=[we];function De(e,t,a,i,o,n){return(0,s.uX)(),(0,s.CE)("div",re,[(0,s.Lk)("div",le,[(0,s.Lk)("div",ne,[ce,ue,(0,s.Lk)("div",de,[(0,s.Lk)("p",null,(0,r.v_)(o.dailyGoals),1)]),(0,s.Lk)("div",he,[ve,pe,(0,s.bo)((0,s.Lk)("input",{type:"text",id:"arrivalTime","onUpdate:modelValue":t[0]||(t[0]=e=>o.arrivalTime=e),readonly:""},null,512),[[l.Jo,o.arrivalTime]])]),(0,s.Lk)("div",ke,[ge,fe,(0,s.bo)((0,s.Lk)("input",{type:"date",id:"date","onUpdate:modelValue":t[1]||(t[1]=e=>o.date=e),readonly:""},null,512),[[l.Jo,o.date]])]),(0,s.Lk)("div",me,[Le,be,(0,s.bo)((0,s.Lk)("textarea",{id:"dailyGoal","onUpdate:modelValue":t[2]||(t[2]=e=>o.dailyGoal=e),class:(0,r.C4)({error:o.errorMessage}),rows:"4",ref:"dailyGoalInput"},"\n          ",2),[[l.Jo,o.dailyGoal]]),o.errorMessage?((0,s.uX)(),(0,s.CE)("p",ye,(0,r.v_)(o.errorMessage),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.submitForm&&n.submitForm(...e))},"Submit"),o.errorFetchingDate?((0,s.uX)(),(0,s.CE)("h5",Ce,"Erreur lors du chargement de la date. Veuillez vérifier votre connexion Internet.")):(0,s.Q3)("",!0)]),o.showPopup?((0,s.uX)(),(0,s.CE)("div",_e,Te)):(0,s.Q3)("",!0)])])}var Ae={data(){return{arrivalTime:"",date:"",dailyGoal:"",dailyGoals:"",errorFetchingDate:!1,showPopup:!1,weeklyGoals:{},errorMessage:""}},mounted(){this.arrivalTime=this.getCurrentTime(),this.fetchDate()},methods:{getCurrentTime(){const e=new Date,t=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${t}:${a}`},fetchDate(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");this.date=`${t}-${a}-${s}`;const i=localStorage.getItem("token"),o={"Content-Type":"application/json",Authorization:`Bearer ${i}`};O.A.get(`${$.J}/week/getweekly`,{headers:o}).then((e=>{console.log("Weekly goals:",this.weeklyGoals),this.weeklyGoals=e.data,this.setDailyGoal()})).catch((e=>{console.error("Error fetching weekly goals:",e),this.errorFetchingDate=!0}))},setDailyGoal(){const e=(new Date).getDay(),t=this.weeklyGoals.data,a=Object.keys(t).filter((e=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].includes(e.toLowerCase())));console.log("Filtered day keys:",a);const s=a[e];console.log("Day key:",s),s?this.dailyGoals=t[s]:console.log("Day key not found for current day of week:",e)},submitForm(){if(!this.dailyGoal)return this.errorMessage="Le champ 'Objectif de la journée' est requis.",void this.shakeInput();const e=localStorage.getItem("token"),t={"Content-Type":"application/json",Authorization:`Bearer ${e}`},a={arrivalTime:this.arrivalTime,date:this.date,dailyGoal:this.dailyGoal};O.A.post(`${$.J}/user/entre`,a,{headers:t}).then((e=>{console.log("Form submitted successfully:",e.data),this.arrivalTime="",this.date="",this.dailyGoal="",this.showPopup=!0,this.errorMessage="",setTimeout((()=>{this.showPopup=!1,this.$router.push("/user/analytics")}),3e3),localStorage.setItem("dailyGoal",a.dailyGoal)})).catch((e=>{console.error("Error submitting form:",e)}))},shakeInput(){const e=this.$refs.dailyGoalInput;e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500)}}};const je=(0,R.A)(Ae,[["render",De],["__scopeId","data-v-6ae088f2"]]);var Fe=je,xe=a(2323);const Pe=e=>((0,s.Qi)("data-v-629324db"),e=e(),(0,s.jt)(),e),Ee={class:"page"},Me={class:"container1"},Ge={class:"content1"},Oe=Pe((()=>(0,s.Lk)("h2",null,"Rapport journalier",-1))),$e=Pe((()=>(0,s.Lk)("br",null,null,-1))),Ie={class:"goal"},Re=Pe((()=>(0,s.Lk)("h4",null,"Est-ce que l'objectif quotidien a été réalisé ?",-1))),Se={class:"check"},Xe=Pe((()=>(0,s.Lk)("label",{for:"oui"},"Oui :",-1))),We={class:"check"},Qe=Pe((()=>(0,s.Lk)("label",{for:"non"},"Non:",-1))),Ue=Pe((()=>(0,s.Lk)("label",{for:"pourcentage"},"Pourcentage de travail effectué:",-1))),Ne=Pe((()=>(0,s.Lk)("option",{value:""},"Sélectionner le pourcentage",-1))),Be=["value"],ze={class:"input-group"},Je=Pe((()=>(0,s.Lk)("label",{for:"justification"},"Commentaire ou justification",-1))),Ve=Pe((()=>(0,s.Lk)("h5",null,"Bon travail ! Passez une agréable soirée sous la protection de Dieu",-1))),qe=Pe((()=>(0,s.Lk)("br",null,null,-1))),Ke={class:"popup",ref:"popup"},He=Pe((()=>(0,s.Lk)("img",{class:"check",src:xe},null,-1))),Ze=Pe((()=>(0,s.Lk)("h2",null,"Rapport soumis avec succès !",-1)));function Ye(e,t,a,i,o,n){return(0,s.uX)(),(0,s.CE)("div",Ee,[(0,s.Lk)("div",Me,[(0,s.Lk)("div",Ge,[Oe,$e,(0,s.Lk)("div",Ie,[(0,s.Lk)("p",null,(0,r.v_)(o.dailyGoal),1)]),Re,(0,s.Lk)("div",Se,[Xe,(0,s.bo)((0,s.Lk)("input",{type:"radio",id:"oui",value:"oui","onUpdate:modelValue":t[0]||(t[0]=e=>o.choix=e),class:(0,r.C4)({error:o.errors.choix}),ref:"choixField"},null,2),[[l.XL,o.choix]])]),(0,s.Lk)("div",We,[Qe,(0,s.bo)((0,s.Lk)("input",{type:"radio",id:"non",value:"non","onUpdate:modelValue":t[1]||(t[1]=e=>o.choix=e),class:(0,r.C4)({error:o.errors.choix}),ref:"choixField"},null,2),[[l.XL,o.choix]])]),(0,s.Lk)("div",null,[Ue,(0,s.bo)((0,s.Lk)("select",{id:"pourcentage","onUpdate:modelValue":t[2]||(t[2]=e=>o.pourcentage=e),class:(0,r.C4)({error:o.errors.pourcentage}),ref:"pourcentageField"},[Ne,((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(11,(e=>(0,s.Lk)("option",{key:e,value:10*e},(0,r.v_)(10*e)+"%",9,Be))),64))],2),[[l.u1,o.pourcentage]])]),(0,s.Lk)("div",ze,[Je,(0,s.bo)((0,s.Lk)("textarea",{id:"justification","onUpdate:modelValue":t[3]||(t[3]=e=>o.justification=e),rows:"4",class:(0,r.C4)({error:o.errors.justification}),ref:"justificationField"},null,2),[[l.Jo,o.justification]])]),Ve,qe,(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.submitForm&&n.submitForm(...e))},"Soumettre")]),(0,s.Lk)("div",Ke,[He,Ze,(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.closePopup&&n.closePopup(...e)),type:"button"},"OK")],512)])])}var et={data(){return{justification:"",choix:"",pourcentage:"",dailyGoal:"",errors:{justification:!1,choix:!1,pourcentage:!1}}},mounted(){this.dailyGoal=localStorage.getItem("dailyGoal")},methods:{openPopup(){this.$refs.popup.classList.add("open-popup")},closePopup(){this.$refs.popup.classList.remove("open-popup"),this.$router.push("/user/analytics")},submitForm(){if(this.errors.justification=!this.justification,this.errors.choix=!this.choix,this.errors.pourcentage=!this.pourcentage,this.errors.justification||this.errors.choix||this.errors.pourcentage)return void this.shakeInput();const e={justification:this.justification,choix:this.choix,pourcentage:this.pourcentage,dailyGoal:this.dailyGoal},t=localStorage.getItem("token"),a={"Content-Type":"application/json",Authorization:`Bearer ${t}`};O.A.post(`${$.J}/user/rapport`,e,{headers:a}).then((e=>{200===e.status&&(this.openPopup(),setTimeout((()=>{this.closePopup()}),3e3))})).catch((e=>{console.error(e)}))},shakeInput(){const e=[this.$refs.justificationField,this.$refs.choixField,this.$refs.pourcentageField];e.forEach((e=>{e&&(Array.isArray(e)?e.forEach((e=>{e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500)})):(e.classList.add("shake"),setTimeout((()=>e.classList.remove("shake")),500)))}))}}};const tt=(0,R.A)(et,[["render",Ye],["__scopeId","data-v-629324db"]]);var at=tt;const st=e=>((0,s.Qi)("data-v-214f2748"),e=e(),(0,s.jt)(),e),it={class:"stud-dash"},ot={class:"welcome"},rt={class:"right"},lt={class:"up-welcome"},nt=st((()=>(0,s.Lk)("p",{class:"under-welcome"}," N'oubliez pas de générer le rapport à la fin de la journée. Votre rapport reflète le travail accompli et ne peut être rempli qu'une fois par jour. ",-1))),ct=st((()=>(0,s.Lk)("div",{class:"left"},[(0,s.Lk)("img",{class:"welcome-img",src:W,alt:"dashboard"})],-1))),ut={class:"statistics-component"},dt=st((()=>(0,s.Lk)("h2",null,"Statistiques du jour",-1))),ht={class:"percentage-of-the-day"},vt={class:"chart"},pt=st((()=>(0,s.Lk)("h3",null,"Diagramme à barres",-1))),kt={ref:"barChartCanvas"},gt={class:"chart"},ft=st((()=>(0,s.Lk)("h3",null,"Diagramme en courbes",-1))),mt={ref:"lineChartCanvas"};function Lt(e,t,a,i,o,l){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",it,[(0,s.Lk)("div",ot,[(0,s.Lk)("div",rt,[(0,s.Lk)("p",lt,[(0,s.eW)(" Bienvenue "),(0,s.Lk)("span",null,(0,r.v_)(e.firstName),1)]),nt]),ct])]),(0,s.Lk)("div",ut,[dt,(0,s.Lk)("div",ht,[(0,s.Lk)("p",null,"Percentage du jour: "+(0,r.v_)(o.percentageOfDay)+"%",1)]),(0,s.Lk)("div",vt,[pt,(0,s.Lk)("canvas",kt,null,512)]),(0,s.Lk)("div",gt,[ft,(0,s.Lk)("canvas",mt,null,512)])])],64)}var bt=a(3456),yt={data(){return{percentageOfDay:0,userData:[]}},mounted(){this.fetchUserDataFromBackend()},methods:{async fetchUserDataFromBackend(){try{const e=localStorage.getItem("token"),t={"Content-Type":"application/json",Authorization:`Bearer ${e}`},a=await O.A.get(`${$.J}/admin/percent`,{headers:t});this.userData=a.data,console.log("Data",a.data),this.calculatePercentageOfDay(),this.populateCharts()}catch(e){console.error("Error fetching user data from backend:",e)}},calculatePercentageOfDay(){const e=this.userData.reduce(((e,t)=>e+parseFloat(t.pourcentage)),0);console.log("sum",e),this.percentageOfDay=this.userData.length>0?Math.round(e/this.userData.length):0},populateCharts(){const e=this.userData.map((e=>e.name)),t=this.userData.map((e=>e.percentage)),a=["Day 1","Day 2","Day 3","Day 4","Day 5"],s=this.userData.map((e=>e.variations)),i=this.$refs.barChartCanvas.getContext("2d");new bt.Ay(i,{type:"bar",data:{labels:e,datasets:[{label:"Percentage",data:t,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}});const o=this.$refs.lineChartCanvas.getContext("2d");new bt.Ay(o,{type:"line",data:{labels:a,datasets:this.userData.map(((e,t)=>({label:e.name,data:s[t],borderColor:"#"+(16777215*Math.random()|0),fill:!1})))},options:{scales:{y:{beginAtZero:!0}}}})}}};const Ct=(0,R.A)(yt,[["render",Lt],["__scopeId","data-v-214f2748"]]);var _t=Ct,wt=a(2206),Tt=a(9074),Dt=a(6384),At=a(5303),jt=a(2181),Ft=a(6144),xt=a(4824),Pt=a(7679);const Et=e=>((0,s.Qi)("data-v-864d71f2"),e=e(),(0,s.jt)(),e),Mt={class:"profile-info"},Gt=["src"],Ot={class:"report-time"},$t={class:"report-info"},It=Et((()=>(0,s.Lk)("h3",null,"Rapport de l'utilisateur",-1)));function Rt(e,t,a,i,o,l){return(0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.users,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"report-component",key:e._id},[(0,s.Lk)("div",Mt,[(0,s.Lk)("img",{src:e.profilePhotoURL?e.profilePhotoURL:"../assets/icons/profile-icon.svg",alt:"Profile"},null,8,Gt),(0,s.Lk)("span",null,(0,r.v_)(e.firstName),1)]),(0,s.Lk)("div",Ot,(0,r.v_)(e.createdAt),1),(0,s.Lk)("div",$t,[It,(0,s.Lk)("div",null,"Role:"+(0,r.v_)(e.role),1),(0,s.Lk)("p",null,"Percentage: "+(0,r.v_)(e.pourcentage)+"%",1),(0,s.Lk)("p",null,"Decision: "+(0,r.v_)(e.choix),1),(0,s.Lk)("p",null,"commentaire:"+(0,r.v_)(e.justification),1)])])))),128)}var St={data(){return{}},mounted(){this.fetchReportFromBackend()},methods:{fetchReportFromBackend(){const e=localStorage.getItem("token"),t={"Content-Type":"application/json",Authorization:`Bearer ${e}`};O.A.get(`${$.J}/user/report`,{headers:t}).then((e=>{this.users=e.data})).catch((e=>{console.error("Error fetching report data from backend:",e)}))}}};const Xt=(0,R.A)(St,[["render",Rt],["__scopeId","data-v-864d71f2"]]);var Wt=Xt;const Qt=e=>((0,s.Qi)("data-v-9358e728"),e=e(),(0,s.jt)(),e),Ut={class:"report-component"},Nt={class:"profile-info"},Bt={class:"report-time"},zt={class:"report-info"},Jt={class:"objective"},Vt=Qt((()=>(0,s.Lk)("h3",null,"Objectif",-1))),qt=Qt((()=>(0,s.Lk)("br",null,null,-1))),Kt={class:"repport"},Ht=Qt((()=>(0,s.Lk)("h3",null,"Rapport",-1)));function Zt(e,t,a,i,o,l){return(0,s.uX)(),(0,s.CE)("div",Ut,[(0,s.Lk)("div",Nt,[(0,s.Lk)("div",null,"Role: "+(0,r.v_)(o.role),1)]),(0,s.Lk)("div",Bt,(0,r.v_)(o.createdAt),1),(0,s.Lk)("div",zt,[(0,s.Lk)("div",Jt,[Vt,(0,s.Lk)("p",null,"Time: "+(0,r.v_)(o.arrivalTime),1),(0,s.Lk)("p",null,"Date: "+(0,r.v_)(o.date),1),(0,s.Lk)("p",null,"Commentaire: "+(0,r.v_)(o.dailyGoal),1)]),qt,(0,s.Lk)("div",Kt,[Ht,(0,s.Lk)("p",null,"Percentage: "+(0,r.v_)(o.pourcentage)+"%",1),(0,s.Lk)("p",null,"Decision: "+(0,r.v_)(o.choix),1),(0,s.Lk)("p",null,"Commentaire: "+(0,r.v_)(o.justification),1)])])])}var Yt={data(){return{createdAt:"",dailyGoal:"",choix:"",justification:"",role:"",date:"",arrivalTime:"",pourcentage:""}},mounted(){this.fetchReportFromBackend()},methods:{fetchReportFromBackend(){const e=localStorage.getItem("token"),t={"Content-Type":"application/json",Authorization:`Bearer ${e}`};O.A.get(`${$.J}/user/getobject`,{headers:t}).then((e=>{const{outObjective:t,enterObjective:a}=e.data;this.role=t.role,this.createdAt=t.createdAt,this.dailyGoal=a.dailyGoal,this.choix=t.choix,this.justification=t.justification,this.date=a.date,this.arrivalTime=a.arrivalTime,this.pourcentage=t.pourcentage})).catch((e=>{console.error("Error fetching report data from backend:",e)}))}}};const ea=(0,R.A)(Yt,[["render",Zt],["__scopeId","data-v-9358e728"]]);var ta=ea;const aa=e=>((0,s.Qi)("data-v-53d8bf0b"),e=e(),(0,s.jt)(),e),sa={class:"user-statistics"},ia=aa((()=>(0,s.Lk)("h2",null,"Statistiques de travail de l'utilisateur",-1))),oa={class:"statistics-item"},ra=aa((()=>(0,s.Lk)("h3",null,"Nombre d'heures travaillées aujourd'hui",-1))),la={class:"statistics-item"},na=aa((()=>(0,s.Lk)("h3",null,"Productivité moyenne",-1))),ca={class:"chart-container"},ua={ref:"barChart"};function da(e,t,a,i,o,l){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",sa,[ia,(0,s.Lk)("div",oa,[ra,(0,s.Lk)("p",null,(0,r.v_)(o.hoursWorkedToday)+" heures",1)]),(0,s.Lk)("div",la,[na,(0,s.Lk)("p",null,(0,r.v_)(o.averageProductivity)+"%",1)])]),(0,s.Lk)("div",ca,[(0,s.Lk)("canvas",ua,null,512)])])}var ha={data(){return{hoursWorkedToday:8.5,averageProductivity:75}},mounted(){const e={labels:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],datasets:[{label:"Nombre d'heures travaillées par jour",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,data:[8,7.5,8.5,7,9,6.5]}]},t={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};new bt.t1(this.$refs.barChart,{type:"bar",data:e,options:t})}};const va=(0,R.A)(ha,[["render",da],["__scopeId","data-v-53d8bf0b"]]);var pa=va,ka=a(2749),ga=a(2565),fa=a(9173),ma=a(8747),La=a(1369),ba={components:{userDashLayout:o.A,UserDashSidebarComponent:se,UserDashNavbarComponent:X,analytics:_t,inscription:ie.A,suivi:Fe,rapport:at,setting:wt.A,search:Tt.A,userInfo:jt.A,gererCount:Ft.A,aide:Dt.A,changeCount:At.A,logout:xt.A,Parametre:Pt.A,userReport:Wt,review:ta,statistic:pa,listOfchildren:ka.A,ActiviteHebdomadaire:ga.A,Message:fa.A,Absent:ma.A,childPicture:La["default"]},data(){return{CurrentView:""}},watch:{$route(e){this.CurrentView=e.params.id}}};const ya=(0,R.A)(ba,[["render",i]]);var Ca=ya}}]);