"use strict";(self["webpackChunknouveau_projet"]=self["webpackChunknouveau_projet"]||[]).push([[324],{9324:function(s,o,e){e.r(o),e.d(o,{default:function(){return $}});var a=e(6768),i=e(4232),r=e(5130),t=e(7397),l=e(7599),n=e(2323);const p=s=>((0,a.Qi)("data-v-b37e6930"),s=s(),(0,a.jt)(),s),d={class:"overall"},u=p((()=>(0,a.Lk)("img",{class:"login-pic",src:t,alt:"login-picture"},null,-1))),c=p((()=>(0,a.Lk)("div",{class:"login-intro"},[(0,a.eW)("Compassion Togo"),(0,a.Lk)("br"),(0,a.eW)("Aneho Nlessi.")],-1))),g=[u,c],h=(0,a.Fv)('<div data-v-b37e6930><a href="http://localhost:8080/" data-v-b37e6930><img class="login-logo" src="'+l+'" alt="logo" data-v-b37e6930></a></div><h2 class="login-title" data-v-b37e6930>Connectez ici</h2><div class="login-user" data-v-b37e6930><img class="user-logo" src="" alt="" data-v-b37e6930></div>',3),b={class:"password-container"},k=["type"],m={key:0,class:"error"},v=["disabled"],f={key:0,class:"fas fa-circle-notch fa-spin"},w={key:1},L={class:"login-p"},C={class:"popup",id:"popup"},y=p((()=>(0,a.Lk)("img",{class:"check",src:n},null,-1))),P=p((()=>(0,a.Lk)("h2",null,"Login was successful",-1)));function E(s,o,e,t,l,n){return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",{class:(0,i.C4)(["login-pic-container",{blurred:l.popupVisible}])},g,2),(0,a.Lk)("div",{class:(0,i.C4)(["login-container",{blurred:l.popupVisible}])},[h,(0,a.Lk)("form",{class:"login-form",onSubmit:o[8]||(o[8]=(0,r.D$)(((...s)=>n.handleLogin&&n.handleLogin(...s)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>l.loginData.email=s),class:"form-input",type:"email",name:"email",placeholder:"Email",onInput:o[1]||(o[1]=(...s)=>n.clearError&&n.clearError(...s)),required:""},null,544),[[r.Jo,l.loginData.email]]),(0,a.Lk)("div",b,[(0,a.bo)((0,a.Lk)("input",{id:"password",class:(0,i.C4)(["form-input inner-pswd",{"is-invalid":l.errorMessage}]),type:l.showPassword?"text":"password",name:"password","onUpdate:modelValue":o[2]||(o[2]=s=>l.loginData.password=s),placeholder:"Password",onInput:o[3]||(o[3]=(...s)=>n.clearError&&n.clearError(...s)),required:""},null,42,k),[[r.hp,l.loginData.password]]),(0,a.Lk)("i",{class:(0,i.C4)(["toggle-password-icon",{"fas fa-eye-slash":!l.showPassword,"fas fa-eye":l.showPassword}]),onClick:o[4]||(o[4]=(...s)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...s))},null,2)]),l.errorMessage?((0,a.uX)(),(0,a.CE)("span",m,(0,i.v_)(l.errorMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[(0,a.Lk)("a",{class:"forgot",onClick:o[5]||(o[5]=(...s)=>n.gotToForgot&&n.gotToForgot(...s))},"Mot de passe oublie?")]),(0,a.Lk)("button",{class:"form-button",type:"submit",onClick:o[6]||(o[6]=(...s)=>n.handleLogin&&n.handleLogin(...s)),disabled:l.loading},[l.loading?((0,a.uX)(),(0,a.CE)("i",f)):((0,a.uX)(),(0,a.CE)("span",w,"Connecte"))],8,v),(0,a.Lk)("div",L,[(0,a.eW)(" Vous n'avez pas de compte? "),(0,a.Lk)("a",{onClick:o[7]||(o[7]=(...s)=>n.goToRegister&&n.goToRegister(...s)),class:"sign-up-link",href:"#"},"Inscription")])],32)],2),(0,a.Lk)("div",C,[y,P,(0,a.Lk)("button",{onClick:o[9]||(o[9]=(...s)=>n.closePopup&&n.closePopup(...s)),type:"button"},"OK")])])}e(4114);var V=e(4373),D=e(2169),_={data(){return{loading:!1,showPassword:!1,popupVisible:!1,loginData:{email:"",password:""},errorMessage:""}},methods:{gotToForgot(){this.$router.push("/forgot-password")},goToRegister(){this.$router.push("/user/signup")},togglePasswordVisibility(){this.showPassword=!this.showPassword},handleLogin(){this.loading=!0,V.A.post(`${D.J}/user/login`,this.loginData,{withCredentials:!0}).then((s=>{localStorage.setItem("token",s.data.token),localStorage.setItem("user",s.data.firstName),200==s.status&&(this.popupVisible=!0,"Coordinateur"===s.data.role?this.$router.push("/admin/adminDashboard"):this.$router.push("/user/suivi"))})).catch((s=>{console.log("Error submitting login:",s),this.errorMessage=s.response.data.message})).finally((()=>{this.loading=!1}))},clearError(){this.errorMessage=""},closePopup(){this.popupVisible=!1,this.$router.push("/student/analytics")}}},M=e(1241);const T=(0,M.A)(_,[["render",E],["__scopeId","data-v-b37e6930"]]);var $=T},7397:function(s,o,e){s.exports=e.p+"img/309430577_431589382413805_5270125874633532938_n.b139b29f.jpg"},2323:function(s,o,e){s.exports=e.p+"img/check.693b4da8.png"},7599:function(s,o,e){s.exports=e.p+"img/logo.f81c0f28.jpeg"}}]);